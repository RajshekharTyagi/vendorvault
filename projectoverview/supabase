ğŸ—ï¸ VendorVault â€“ Database Design (Supabase)

Your app will have 8 core tables + 2 RAG tables + 1 system table for logs.

ğŸ§© 1ï¸âƒ£ users

Stores registered users (admins, auditors, vendors).

Column	Type	Description
id	uuid (PK)	Unique ID (auto from Supabase Auth)
email	text	User email
full_name	text	Display name
role_id	uuid (FK â†’ roles.id)	Userâ€™s role
created_at	timestamp	Creation date
updated_at	timestamp	Last update

Notes:

Youâ€™ll use Supabase Auth for login.

On signup, you insert the user in this table with role = vendor by default.

ğŸ§  2ï¸âƒ£ roles

Defines user roles for RBAC (Role-Based Access Control).

Column	Type	Description
id	uuid (PK)	Role ID
name	text	Role name (admin, vendor, auditor)
description	text	Role description
created_at	timestamp	Added date

Example Data

id	name	description
1	admin	Full access
2	vendor	Limited to own data
3	auditor	Read-only access
ğŸ” 3ï¸âƒ£ permissions

Defines specific app-level actions (optional but clean design).

Column	Type	Description
id	uuid (PK)	Permission ID
name	text	upload_document, view_vendor, approve_checklist
description	text	Human-readable description
ğŸ§© 4ï¸âƒ£ role_permissions

Join table to map which roles have which permissions.

Column	Type	Description
role_id	uuid (FK â†’ roles.id)	Role reference
permission_id	uuid (FK â†’ permissions.id)	Permission reference
ğŸ¢ 5ï¸âƒ£ vendors

Stores core vendor profiles â€” the main entity of VendorVault.

Column	Type	Description
id	uuid (PK)	Vendor ID
name	text	Vendor name
contact_email	text	Vendor contact
category	text	e.g., IT, Finance, Logistics
status	text	active, pending, suspended
created_by	uuid (FK â†’ users.id)	Who created this vendor
created_at	timestamp	Created date
updated_at	timestamp	Last update
ğŸ“„ 6ï¸âƒ£ documents

Stores uploaded files for each vendor (compliance evidence, certificates, etc.).

Column	Type	Description
id	uuid (PK)	Document ID
vendor_id	uuid (FK â†’ vendors.id)	Vendor owner
uploaded_by	uuid (FK â†’ users.id)	Who uploaded
name	text	File name
file_url	text	Supabase Storage path
file_type	text	pdf, docx, png
status	text	uploaded, verified, rejected
expires_on	date	Optional expiration date
remarks	text	Notes or audit feedback
created_at	timestamp	Upload date
â˜‘ï¸ 7ï¸âƒ£ checks (Compliance Checklist)

Tracks the status of compliance items per vendor.

Column	Type	Description
id	uuid (PK)	Checklist ID
vendor_id	uuid (FK â†’ vendors.id)	Vendor reference
check_name	text	e.g., â€œISO 27001 Certificationâ€
status	text	pending, approved, rejected
evidence_url	text	Optional link to uploaded document
checked_by	uuid (FK â†’ users.id)	Who validated
comments	text	Reviewer notes
due_date	date	Renewal or due date
created_at	timestamp	Created date
ğŸ“… 8ï¸âƒ£ renewals

Helps track expiring documents or compliance renewals.

Column	Type	Description
id	uuid (PK)	Renewal ID
vendor_id	uuid (FK â†’ vendors.id)	Vendor reference
document_id	uuid (FK â†’ documents.id)	Linked document
renewal_date	date	Next renewal date
status	text	upcoming, completed, overdue
reminder_sent	boolean	Auto reminder flag
created_at	timestamp	Created date
ğŸ§  RAG Integration Tables

These power your AI Retrieval-Augmented Generation flow.

ğŸ§¾ 9ï¸âƒ£ ai_embeddings

Stores chunked text + embedding vectors for semantic search.

Column	Type	Description
id	uuid (PK)	Embedding ID
vendor_id	uuid (FK â†’ vendors.id)	Vendor reference
document_id	uuid (FK â†’ documents.id)	Which file it came from
chunk_text	text	Extracted text snippet
embedding	vector(1536)	Vector embedding
created_at	timestamp	Date added
ğŸ’¬ ğŸ”Ÿ ai_threads (or qa_threads)

Stores AI queries, answers, and metadata for chat history.

Column	Type	Description
id	uuid (PK)	Thread ID
vendor_id	uuid (FK â†’ vendors.id)	Vendor context
user_id	uuid (FK â†’ users.id)	Who asked
question	text	User query
answer	text	LLM-generated response
context_docs	jsonb	Which docs were referenced
created_at	timestamp	Created date
âš™ï¸ 1ï¸âƒ£1ï¸âƒ£ system_logs (optional)

Tracks important app actions â€” useful for audits and debugging.

Column	Type	Description
id	uuid (PK)	Log ID
user_id	uuid (FK â†’ users.id)	Who performed the action
action	text	e.g., upload_document, update_vendor
entity_type	text	vendor, document, check
entity_id	uuid	Target entity ID
timestamp	timestamp	When it happened
details	jsonb	Extra metadata (file size, role, etc.)
ğŸ”— Relationships Overview
users (1) â”€â”€â”€â”€< vendors (n)
users (1) â”€â”€â”€â”€< documents (n)
vendors (1) â”€â”€â”€â”€< documents (n)
vendors (1) â”€â”€â”€â”€< checks (n)
vendors (1) â”€â”€â”€â”€< renewals (n)
documents (1) â”€â”€â”€â”€< ai_embeddings (n)
vendors (1) â”€â”€â”€â”€< ai_threads (n)
roles (1) â”€â”€â”€â”€< users (n)
roles (1) â”€â”€â”€â”€< role_permissions (n)
permissions (1) â”€â”€â”€â”€< role_permissions (n)

ğŸ§± Example Data Flow

1ï¸âƒ£ Admin adds vendor â†’ inserts into vendors
2ï¸âƒ£ Vendor uploads documents â†’ entries in documents
3ï¸âƒ£ OCR extracts text â†’ embeddings go into ai_embeddings
4ï¸âƒ£ AI queries use embeddings â†’ results stored in ai_threads
5ï¸âƒ£ Compliance checklist updates â†’ records in checks
6ï¸âƒ£ Renewal reminders â†’ managed in renewals
7ï¸âƒ£ Every user action â†’ logged in system_logs

ğŸ”’ Supabase Security (RLS)

Enable Row-Level Security for privacy:

Vendors can only see their own data (vendor_id = auth.uid()).

Admins bypass restrictions.

AI tables restricted by vendor_id.

ğŸ§  Schema Summary (Quick View)
Table	Purpose
users	Registered users
roles	Role definitions
permissions	App permissions
role_permissions	Roleâ€“permission mapping
vendors	Vendor profiles
documents	Uploaded files
checks	Compliance checklist
renewals	Renewal reminders
ai_embeddings	Vectorized text chunks
ai_threads	Q&A chat history
system_logs	Action logs
ğŸš€ Bonus: Edge Functions Youâ€™ll Add
Function	Purpose
generate_embeddings	Extract text + create vectors on upload
send_renewal_reminders	Auto email before expiry
verify_document	AI-assisted document validation
sync_roles	Auto-create user role on signup
ğŸ’¡ In Short

Your database is the spine of VendorVault:

Organized around vendors as the central entity.

Clean relationships for users, documents, and compliance checks.

Extensible with RAG tables for AI-based intelligence.

Secured with RLS and scalable via Supabaseâ€™s edge functions.